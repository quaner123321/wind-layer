<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
<body>
  <canvas id="debugCanvas"></canvas>
  <div id="debugInfo" style="position:fixed; top:10px; left:10px; color:white; background:rgba(0,0,0,0.7); padding:10px;"></div>
  
  <script>
  // 简单WebGL测试
  const canvas = document.getElementById('debugCanvas');
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
  
  const gl = canvas.getContext('webgl2') || canvas.getContext('webgl');
  const infoDiv = document.getElementById('debugInfo');
  
  if (!gl) {
    infoDiv.innerHTML = 'WebGL not supported';
  } else {
    // 测试基本渲染
    const vs = gl.createShader(gl.VERTEX_SHADER);
    gl.shaderSource(vs, `
      attribute vec2 position;
      void main() {
        gl_Position = vec4(position, 0.0, 1.0);
        gl_PointSize = 10.0;
      }
    `);
    gl.compileShader(vs);
    
    const fs = gl.createShader(gl.FRAGMENT_SHADER);
    gl.shaderSource(fs, `
      precision mediump float;
      void main() {
        gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0);
      }
    `);
    gl.compileShader(fs);
    
    const program = gl.createProgram();
    gl.attachShader(program, vs);
    gl.attachShader(program, fs);
    gl.linkProgram(program);
    
    if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
      infoDiv.innerHTML = 'Shader failed: ' + gl.getProgramInfoLog(program);
    } else {
      // 绘制一个点
      gl.useProgram(program);
      gl.clearColor(0, 0, 0, 1);
      gl.clear(gl.COLOR_BUFFER_BIT);
      gl.drawArrays(gl.POINTS, 0, 1);
      
      infoDiv.innerHTML = 'Basic WebGL OK<br>Testing float texture...';
      
      // 测试浮点纹理支持
      const floatTexture = gl.createTexture();
      gl.bindTexture(gl.TEXTURE_2D, floatTexture);
      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, 2, 2, 0, gl.RGBA, gl.FLOAT, null);
      
      const error = gl.getError();
      infoDiv.innerHTML += '<br>Float texture error: ' + error;
    }
  }
  </script>
</body>
</html>